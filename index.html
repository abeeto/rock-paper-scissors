<!DOCTYPE html>
<html lang="en"> 
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors!</title>
        <script>
            const OPTIONS = ["ROCK", "PAPER", "SCISSORS"]
            function getComputerChoice(){
                let choice = Math.floor(Math.random() * 3)
                return OPTIONS[choice]
            }

            function getHumanChoice(prevRoundMsg="") {
                let choice;
                while(choice !== "ROCK" && choice !== "PAPER" && choice !== "SCISSORS"){
                    choice = prompt(`${prevRoundMsg}Choose an option\nROCK\nPAPER\nSCISSORS`).toUpperCase()
                    console.log(choice);
                    if (choice !== "ROCK" && choice !== "PAPER" && choice !== "SCISSORS"){
                        prevRoundMsg="Invalid Input. Try again."
                    }
                }
                return choice
            }
            function playGame(){
                let humanScore = 0, computerScore = 0;
                let roundMsg = "";
                const playRound = (humanChoice, computerChoice) => {
                    const WHAT_BEATS = {
                        "ROCK":"SCISSORS",
                        "PAPER":"ROCK",
                        "SCISSORS":"PAPER",
                    }
                    if(humanChoice === computerChoice){
                        roundMsg = `It's a draw. You both chose ${humanChoice}. Your score: ${++humanScore} Computer Score: ${++computerScore}`;
                    }
                    else if (WHAT_BEATS[humanChoice] == computerChoice){
                        roundMsg = `You win! ${humanChoice} beats ${computerChoice}.Your score: ${++humanScore} Computer Score: ${computerScore}`
                    }else{
                        roundMsg = `You lose! ${computerChoice} beats ${humanChoice}.Your score: ${humanScore} Computer Score: ${++computerScore}`
                    }
                }
                for (let i = 0; i < 5; i++){
                    playRound(getHumanChoice(roundMsg), getComputerChoice());
                }
                alert(roundMsg);
            }
            playGame();
        </script>
    </head>
    <body>

    </body>
</html>